!function(){if(!window.$fsx){var e=window.$fsx={};e.f={},e.m={},e.r=function(t){var l=e.m[t];if(l)return l.m.exports;var n,a=e.f[t];return a?((l=e.m[t]={}).exports={},l.m={exports:l.exports},a.call(l.exports,l.m,l.exports),null===(n=l.m.exports)||-1===["function","object","array"].indexOf(typeof n)||n.hasOwnProperty("default")||(Object.isFrozen(n)?n.default=n:Object.defineProperty(n,"default",{value:n,writable:!0,enumerable:!1})),l.m.exports):void 0}}}(),function(e){e.f[65]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(47),u=e.r(66);e.r(85),a.default.render(n.default.createElement(u.default,null),document.getElementById("app"))},e.f[66]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(0),u=e.r(67),r=e.r(81),o=e.r(84);l.default=(()=>n.default.createElement("div",{className:"page-content"},n.default.createElement(a.Router,null,n.default.createElement(o.default,{path:"signup",signup:!0}),n.default.createElement(o.default,{path:"login"}),n.default.createElement(r.default,{path:":collectionId/:itemId"}),n.default.createElement(u.default,{path:":collectionId"}),n.default.createElement(u.default,{path:"/"}),n.default.createElement("div",{default:!0},"Page not found"))))},e.f[67]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(68),u=e.r(79),r=e.r(71);l.default=function({collectionId:e="krwhitley"}){let{collection:t,isLoading:l}=r.useCollectionDetails(e);return!t||l?n.default.createElement("div",null,"Loading..."):n.default.createElement(u.default,{className:"collection"},n.default.createElement("h1",{className:"collection-title"},t.name),n.default.createElement(a.default,{items:t.items}))}},e.f[68]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(3),u=e.r(69);l.default=function({items:e}){console.log("Grid rendered",e.length);let t=void 0;return e.length<8&&(t="some"),e.length<4&&(t="few"),n.default.createElement("div",{className:a.default("grid",t)},e.map((e,t)=>n.default.createElement(u.default,{key:e.id,item:e})))}},e.f[69]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(0),u=e.r(70);l.default=function({item:e}){return n.default.createElement("article",null,n.default.createElement(a.Link,{to:`/${e.key}`},n.default.createElement(u.default,{id:e.key,width:400,height:400,alt:e.name}),n.default.createElement("label",null,n.default.createElement("span",null,e.name))))}},e.f[70]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(71);function u({id:e,alt:t,width:l,height:u,quality:r}){const o=[];l&&o.push(`width=${l}`),u&&o.push(`height=${u}`),r&&o.push(`quality=${r}`);const i=a.useImageWithPreview(`/i/${e}::${o.join(",")}.jpg`);return n.default.createElement("img",{src:i,alt:t})}l.default=u,l.default=u},e.f[71]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(62);n.__exportStar(e.r(72),l),n.__exportStar(e.r(76),l),n.__exportStar(e.r(77),l),n.__exportStar(e.r(78),l)},e.f[72]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(73);l.useCollections=function(){let[e,t]=n.useState([]),[l,u]=n.useState(!1);return n.useEffect(()=>{console.log("useCollections:useEffect"),u(!0),setTimeout(()=>{a.fetchJSON("/api/collections").then(e=>{t(e),u(!1)})})},[]),{collections:e,isLoading:l}},l.useCollectionSlugIsAvailable=function(e){let[t,l]=n.useState(!1);return n.useEffect(()=>{if(console.log("useCollectionSlugIsAvailable",e),e.length<5)return l(!1);a.fetchStatusIsOK(`/api/collections/${e}/available`).then(l)},[e]),t},l.useCollectionDetails=function(e){let[t,l]=n.useState(void 0),[u,r]=n.useState(!1);return n.useEffect(()=>{console.log("useCollectionDetails",e),r(!0),setTimeout(()=>a.fetchJSON(`/api/collections/${e}`).then(e=>{r(!1),l(e)}))},[e]),{collection:t,isLoading:u}},l.useItemDetails=function({collectionId:e,itemId:t}){let[l,u]=n.useState(void 0),[r,o]=n.useState(!1);return n.useEffect(()=>{if(console.log("useItemDetails",e,t),!e||!t)return console.warn("attempting to useItemDetails without collectionId or itemId");o(!0),setTimeout(()=>a.fetchJSON(`/api/collections/${e}/items/${t}`).then(e=>{o(!1),u(e)}),0)},[e,t]),{item:l,isLoading:r}}},e.f[73]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(62);n.__exportStar(e.r(74),l),n.__exportStar(e.r(75),l)},e.f[74]=function(e,t){function l(...e){return fetch(...e).then(e=>e.status)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJSON=function(...e){return fetch(...e).then(e=>e.json())},t.fetchStatus=l,t.fetchStatusIsOK=function(...e){return l(...e).then(e=>200===e)}},e.f[75]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.withValue=function(e){return({target:t})=>e({name:t.name,value:t.value})}},e.f[76]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52);l.useImageWithPreview=function(e){const t=e.replace(/^(.*)(\.jpg|png)$/i,"$1,preview$2");let[l,a]=n.useState(t);return n.useEffect(()=>{(new Image).onload=a(e)},[e]),l}},e.f[77]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52);l.usePrevious=function(e){const t=n.useRef();return n.useEffect(()=>{console.log("usePrevious:useEffect"),t.current=e},[e]),t.current}},e.f[78]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(73);l.useUser=function(){let[e,t]=n.useState({email:"",password:"",slug:"",isValidating:!1});const l=({name:l,value:n})=>t(Object.assign({},e,{[l]:n})),u=a.withValue(l);return{user:e,update:l,updateFromInput:u}}},e.f[79]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(62),a=e.r(52),u=e.r(3),r=e.r(80);l.default=(e=>{var{children:t,className:l,back:o}=e,i=n.__rest(e,["children","className","back"]);return a.default.createElement("div",{className:u.default("page",l)},o&&a.default.createElement(r.default,Object.assign({},i)),t)})},e.f[80]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52);l.Back=(({navigate:e,to:t="../"})=>{return n.default.createElement("div",{className:"back",onClick:()=>e(t)})}),l.default=l.Back},e.f[81]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(70),u=e.r(82),r=e.r(79),o=e.r(71),i=e.r(83);l.default=function({collectionId:e,itemId:t,navigate:l}){console.log("ItemViewer",e,t);let{item:c,isLoading:s}=o.useItemDetails({collectionId:e,itemId:t});return!c||s?n.default.createElement("div",null,"Loading..."):n.default.createElement(r.default,{back:!0,className:"viewer",navigate:l},n.default.createElement(a.default,{id:e+"/"+c.id,width:900}),n.default.createElement(u.default,{item:c}),n.default.createElement(i.default,{item:c}))}},e.f[82]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52),a=e.r(51);l.default=function({item:e}){return n.default.createElement("div",{className:"image-details"},n.default.createElement("h1",null,e.name),n.default.createElement("div",{className:"story"},a.default([e.story])))}},e.f[83]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(52);l.default=(({item:e})=>n.default.createElement("pre",null,JSON.stringify(e,null,2)))},e.f[84]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const n=e.r(62),a=e.r(52),u=e.r(79),r=e.r(83),o=(e.r(73),e.r(71));l.Input=(e=>{var{name:t,value:l,onChange:u}=e,r=n.__rest(e,["name","value","onChange"]);return a.default.createElement("input",Object.assign({type:"text",name:t,value:l,placeholder:t,onChange:u},r))}),l.CollectionDetails=(({collectionId:e})=>{let{collection:t,isLoading:l}=o.useCollectionDetails(e);return t?a.default.createElement("div",null,a.default.createElement("h1",null,t.name," (",t.items.length,")")):a.default.createElement("div",null,"Loading...")}),l.default=(({navigate:e,signup:t=!1})=>{let{user:n,updateFromInput:i}=o.useUser(),{collections:c,isLoading:s}=o.useCollections(),f=o.useCollectionSlugIsAvailable(n.slug),d=o.usePrevious(f);return a.default.createElement(u.default,{className:"form full-page user-login",navigate:e},s?a.default.createElement("div",null,"Loading..."):c.map((e,t)=>a.default.createElement(l.CollectionDetails,{key:e.slug,collectionId:e.slug})),a.default.createElement(r.default,{item:c.map(e=>e.slug),somethingelse:!0}),a.default.createElement("h1",null,"User"),a.default.createElement(r.default,{item:n,somethingelse:!0}),a.default.createElement(l.Input,{name:"email",type:"email",value:n.email,onChange:i}),a.default.createElement(l.Input,{name:"password",type:"password",value:n.password,onChange:i}),a.default.createElement(l.Input,{name:"slug",value:n.slug,onChange:i}),a.default.createElement("h1",null,"isAvailable"),f?"available":"name taken",a.default.createElement("h1",null,"isAvailable (previous)"),d?"prev:available":"prev:name taken")})},e.r(65)}($fsx);
//# sourceMappingURL=app_quantum.js.map