{"version":3,"sources":["src/client/index.jsx","src/client/components/App.jsx","src/client/components/Collection/index.jsx","src/client/components/Collection/Grid.jsx","src/client/components/Collection/Item/index.jsx","src/client/components/Imager.jsx","src/client/hooks/index.js","src/client/hooks/collections.js","src/client/utils/index.js","src/client/utils/fetch.js","src/client/utils/misc.js","src/client/hooks/images.js","src/client/hooks/misc.js","src/client/hooks/user.js","src/client/components/Page.jsx","src/client/components/Back.jsx","src/client/components/Collection/Item/Viewer.jsx","src/client/components/Collection/Item/Details.jsx","src/client/components/Controls/Inspect.jsx","src/client/components/User/Login.jsx","src/client/components/Controls/Input.jsx"],"names":["react_1","$fsx","r","react_dom_1","App_1","default","render","createElement","document","getElementById","router_1","Collection_1","Viewer_1","Login_1","exports","className","Router","path","signup","Grid_1","Page_1","hooks_1","collectionId","collection","isLoading","useCollectionDetails","name","items","classnames_1","Item_1","console","log","length","gridScale","undefined","map","item","index","key","id","Imager_1","Link","to","width","height","alt","Image","quality","params","push","src","useImageWithPreview","join","tslib_1","__exportStar","utils_1","useCollectionSlugIsAvailable","slug","isAvailable","setIsAvailable","useState","useEffect","fetchStatusIsOK","then","useCollections","collections","setCollections","setIsLoading","fetchJSON","setCollection","useItemDetails","itemId","setItem","warn","useNewCollection","setSlug","apiKey","setApiKey","withSlugifiedValue","fetchStatus","args","fetch","status","json","withValue","fn","target","value","toLowerCase","replace","previewPath","setSrc","onload","usePrevious","ref","useRef","current","save","method","headers","Content-Type","body","JSON","stringify","useUser","user","setUser","email","password","isValidating","Object","assign","[object Object]","Back_1","_a","children","back","props","__rest","Back","navigate","onClick","Details_1","Inspect_1","react_markings_1","story","Input_1","CollectionDetails","previousIsAvailable","c","i","somethingelse","type","onChange","placeholder","valueOnly","label"],"mappings":"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","sourcesContent":["import React, { h } from 'react'\nimport ReactDom from 'react-dom'\n\nimport App from './components/App'\n// import store from './state'\n// import './utils/zoomfix'\n\n// styles\nimport './styles/base.scss'\n\nReactDom.render(<App />, document.getElementById('app'))\n","import React from 'react'\nimport { Router } from '@reach/router'\n\nimport CollectionIndex from './Collection'\nimport ItemViewer from './Collection/Item/Viewer'\nimport Login from './User/Login'\n// import CreateCollection from './Collection/CreateForm'\nimport Back from './Back'\n// import UserActions from './User/UserActions'\n\nconst App = () =>\n  <div className=\"page-content\">\n    <Router>\n      {/*<CreateCollection path=\"create-collection\" />*/}\n      <Login path=\"signup\" signup />\n      <Login path=\"login\" />\n      <ItemViewer path=\":collectionId/:itemId\" />\n      <CollectionIndex path=\":collectionId\" />\n      <CollectionIndex path=\"/\" />\n      <div default>Page not found</div>\n    </Router>\n\n    {/*<UserActions />*/}\n  </div>\n\nexport default App\n","import React from 'react'\nimport Grid from './Grid'\nimport Page from '../Page'\nimport { useCollectionDetails } from '../../hooks'\n\nexport default function ImageCollection({ collectionId = 'krwhitley' }) {\n  let { collection, isLoading } = useCollectionDetails(collectionId)\n\n  if (!collection || isLoading) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <Page className=\"collection\">\n      <h1 className=\"collection-title\">{ collection.name }</h1>\n\n      <Grid items={collection.items} />\n    </Page>\n  )\n}\n\n// export default ImageCollection\n//inject('app', 'user', 'collection', 'scroll')(observer(ImageCollection))\n\n// componentWillUnmount() {\n  //   this.props.scroll.isTracking = false\n  //   window.scrollTo(0, 0)\n  // }\n\n  // componentDidMount() {\n  //   console.log('ImageCollection:props', this.props)\n  //   let { collection, collectionId, scroll } = this.props\n\n  //   scroll.restore()\n  //   scroll.isTracking = true\n  //   collection.load(collectionId || 'krwhitley')\n  // }\n\n  // componentDidUpdate(prev) {\n  //   let { collectionId, collection } = this.props\n\n  //   if (collectionId !== prev.collectionId) {\n  //     collection.load(collectionId || 'krwhitley')\n  //   }\n  // }\n\n  // return() {\n  //   let { app, user, collection, navigate } = this.props\n  //   console.log('CollectionIndex', collection)\n\n  //   return (\n  //     <Page className=\"collection\">\n  //       {\n  //         app.editMode && user.isLoggedIn\n  //         ? <div className=\"edit-collection-details\">\n  //             <LiveEdit\n  //               className=\"h1 collection-title\"\n  //               value={collection.name}\n  //               onChange={collection.set('name')}\n  //               placeholder=\"Gallery Title\"\n  //             />\n\n  //             {\n  //               collection.isDirty && <button\n  //                 className=\"save\"\n  //                 onClick={collection.save}\n  //                 >\n  //                 Save Changes\n  //               </button>\n  //             }\n  //           </div>\n  //         : <h1 className=\"collection-title\">{ collection.name }</h1>\n  //       }\n  //       <Grid />\n  //     </Page>\n  //   )\n  // }\n","import React from 'react'\nimport classNames from 'classnames'\nimport Item from './Item'\n\nexport default function Grid({ items }) {\n  console.log('Grid rendered', items.length)\n  let gridScale = undefined\n\n  if (items.length < 8) {\n    gridScale = 'some'\n  }\n\n  if (items.length < 4) {\n    gridScale = 'few'\n  }\n\n  return (\n    <div className={classNames('grid', gridScale)}>\n      {\n        items.map((item, index) =>\n          <Item\n            key={item.id}\n            item={item}\n            />\n        )\n      }\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from '@reach/router'\nimport Imager from '../../Imager'\n\nexport default function GridItem({ item }) {\n  return (\n    <article>\n      <Link to={`/${item.key}`}>\n        <Imager\n          id={item.key}\n          width={400}\n          height={400}\n          alt={item.name}\n          />\n        <label><span>{ item.name }</span></label>\n      </Link>\n    </article>\n  )\n}\n","import React, { Component } from 'react'\nimport { useImageWithPreview } from '../hooks'\n\nexport default function Image({ id, alt, width, height, quality }) {\n  const params = []\n  if (width) params.push(`width=${width}`)\n  if (height) params.push(`height=${height}`)\n  if (quality) params.push(`quality=${quality}`)\n\n  const src = useImageWithPreview(`/i/${id}::${params.join(',')}.jpg`)\n\n  return (\n    <img src={src} alt={alt} />\n  )\n}\n\nexport default Image\n","export * from './collections'\nexport * from './images'\nexport * from './misc'\nexport * from './user'\n","import { useState, useRef, useEffect } from 'react'\nimport {\n  fetchJSON,\n  fetchStatusIsOK,\n  withValue,\n  withSlugifiedValue,\n} from '../utils'\n\nexport function useCollections() {\n  let [ collections, setCollections ] = useState([])\n  let [ isLoading, setIsLoading ] = useState(false)\n\n  useEffect(() => {\n    console.log('useCollections:useEffect')\n    setIsLoading(true)\n\n    fetchJSON('/api/collections')\n      .then(r => {\n        setCollections(r)\n        setIsLoading(false)\n      })\n  }, [])\n\n  return {\n    collections,\n    isLoading,\n  }\n}\n\nexport function useCollectionSlugIsAvailable(slug) {\n  let [ isAvailable, setIsAvailable ] = useState(false)\n\n  useEffect(() => {\n    console.log('useCollectionSlugIsAvailable', slug)\n\n    if (slug.length < 5) {\n      return setIsAvailable(false)\n    }\n\n    fetchStatusIsOK(`/api/collections/${slug}/available`)\n      .then(setIsAvailable)\n  }, [slug])\n\n  return isAvailable\n}\n\nexport function useCollectionDetails(slug) {\n  let [ collection, setCollection ] = useState(undefined)\n  let [ isLoading, setIsLoading ] = useState(false)\n\n  useEffect(() => {\n    setIsLoading(true)\n\n    fetchJSON(`/api/collections/${slug}`)\n      .then(r => {\n        setIsLoading(false)\n        setCollection(r)\n      })\n  }, [slug])\n\n  return { collection, isLoading }\n}\n\nexport function useItemDetails({ collectionId, itemId }) {\n  let [ item, setItem ] = useState(undefined)\n  let [ isLoading, setIsLoading ] = useState(false)\n\n  useEffect(() => {\n    if (!collectionId || !itemId) {\n      return console.warn('attempting to useItemDetails without collectionId or itemId')\n    }\n\n    setIsLoading(true)\n\n    fetchJSON(`/api/collections/${collectionId}/items/${itemId}`)\n      .then(r => {\n        setItem(r)\n        setIsLoading(false)\n      })\n  }, [collectionId, itemId])\n\n  return { item, isLoading }\n}\n\nexport function useNewCollection() {\n  let [ slug, setSlug ] = useState('')\n  let [ apiKey, setApiKey ] = useState('')\n\n  return {\n    apiKey,\n    setApiKey,\n    slug,\n    setSlug: withSlugifiedValue(setSlug),\n    isAvailable: useCollectionSlugIsAvailable(slug),\n  }\n}\n","export * from './fetch'\nexport * from './misc'\n","export function fetchJSON(...args) {\n  return fetch(...args).then(r => r.json())\n}\n\nexport function fetchStatus(...args) {\n  return fetch(...args).then(r => r.status)\n}\n\nexport function fetchStatusIsOK(...args) {\n  return fetchStatus(...args).then(r => r === 200)\n}\n","export function withValue(fn) {\n  return ({ target }) => fn({ name: target.name, value: target.value })\n}\n\nexport function withSlugifiedValue(fn) {\n  return (value) => fn(value.toLowerCase()\n                          .replace(/[^\\w\\.\\-_]/gi, '-')\n                          .replace(/\\-+/gi, '-')\n                      )\n}\n","import { useState, useEffect } from 'react'\n\nexport function useImageWithPreview(path) {\n  const previewPath = path.replace(/^(.*)(\\.jpg|png)$/i, '$1,preview$2')\n  let [ src, setSrc ] = useState(previewPath)\n\n  useEffect(() => {\n    let image = new Image()\n    image.onload = setSrc(path)\n  }, [path])\n\n  return src\n}\n","import { useState, useRef, useEffect } from 'react'\n\nexport function usePrevious(value) {\n  const ref = useRef()\n\n  useEffect(() => {\n    console.log('usePrevious:useEffect')\n    ref.current = value\n  }, [value])\n\n  return ref.current\n}\n","import { useState, useRef, useEffect } from 'react'\nimport { fetchJSON, fetchStatusIsOK } from '../utils'\n\nexport function save(id) {\n  return (json) => fetchStatusIsOK(`/api/fake-collections/${id}`, {\n                      method: 'POST',\n                      headers: {\n                        'Content-Type': 'application/json',\n                      },\n                      body: JSON.stringify(json),\n                    })\n}\n\nexport function useUser() {\n  let [ user, setUser ] = useState({\n    email: '',\n    password: '',\n    isValidating: false,\n  })\n\n  const updateFromInput = ({ name, value }) => setUser({ ...user, [name]: value })\n\n  return { user, setUser: updateFromInput }\n}\n","import React from 'react'\nimport classNames from 'classnames'\nimport Back from './Back'\n\nexport default ({ children, className, back, ...props }) => {\n  return (\n    <div className={classNames('page', className)}>\n      { back && <Back {...props} /> }\n      { children }\n    </div>\n  )\n}\n","import React from 'react'\n\nexport const Back = ({ navigate, to = '../' }) => {\n  const goBack = () => navigate(to)\n  return <div className=\"back\" onClick={goBack} />\n}\n\nexport default Back\n","import React from 'react'\nimport Imager from '../../Imager'\nimport Details from './Details'\nimport Page from '../../Page'\nimport { useItemDetails } from '../../../hooks'\nimport Inspect from '../../Controls/Inspect'\n\nexport default function ItemViewer({ collectionId, itemId, navigate }) {\n  let { item, isLoading } = useItemDetails({ collectionId, itemId })\n  console.log('ItemViewer', collectionId, itemId, item, isLoading)\n\n  if (!item || isLoading) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <Page back className=\"viewer\" navigate={navigate}>\n      <Imager\n        id={collectionId + '/' + item.id}\n        width={900}\n        />\n      <Details item={item} />\n      <Inspect item={item} />\n    </Page>\n  )\n}\n","import React from 'react'\nimport md from 'react-markings'\n// import LiveEdit from '../../Controls/LiveEdit'\n\nexport default function ImageDetails({ item }) {\n  return (\n    <div className=\"image-details\">\n      <h1>{ item.name }</h1>\n      <div className=\"story\">\n        { md([item.story]) }\n      </div>\n    </div>\n  )\n}\n\n  // <div className=\"image-details\">\n  //     {\n  //       app.editMode\n  //       ? <LiveEdit\n  //           className=\"h1 title\"\n  //           value={image.name}\n  //           onChange={image.set('name')}\n  //           placeholder=\"Give the image a title\"\n  //           />\n  //       : <h1>{ image.name }</h1>\n  //     }\n\n  //     {\n  //       app.editMode\n  //       ? <LiveEdit\n  //           className=\"story\"\n  //           value={image.story}\n  //           onChange={image.set('story')}\n  //           placeholder=\"Tell the story\"\n  //           />\n  //       : <div className=\"story\">\n  //           { md([image.story]) }\n  //         </div>\n  //     }\n\n  //     {\n  //       app.editMode && image.isDirty\n  //       ? <button\n  //           className=\"save\"\n  //           onClick={image.save}\n  //           >\n  //           Save Changes\n  //         </button>\n  //       : null\n  //     }\n  //   </div>\n  // )\n","import React from 'react'\n\nexport default ({ item }) =>\n  <pre>{ JSON.stringify(item, null, 2) }</pre>\n","import React, { useState, useRef, useEffect } from 'react'\nimport Page from '../Page'\nimport LoginForm from './LoginForm'\nimport Inspect from '../Controls/Inspect'\nimport Input from '../Controls/Input'\nimport { login } from '../../api/users'\nimport { fetchJSON, fetchStatus, fetchStatusIsOK, withValue } from '../../utils'\nimport {\n  usePrevious,\n  useCollections,\n  useCollectionSlugIsAvailable,\n  useCollectionDetails,\n  useNewCollection,\n  useUser,\n} from '../../hooks'\n\nexport const CollectionDetails = ({ collectionId }) => {\n  let { collection, isLoading } = useCollectionDetails(collectionId)\n\n  if (!collection) {\n    return <div>Loading...</div>\n  }\n\n  return (\n    <div>\n      <h1>{ collection.name } ({ collection.items.length })</h1>\n    </div>\n  )\n}\n\nexport default ({ navigate, signup = false }) => {\n  let { user, setUser } = useUser()\n  let { collections, isLoading } = useCollections()\n  let collection = useNewCollection()\n  let {\n    slug,\n    setSlug,\n    apiKey,\n    setApiKey,\n    isAvailable,\n  } = collection\n\n  let previousIsAvailable = usePrevious(isAvailable)\n\n  return (\n    <Page className=\"form full-page user-login\" navigate={navigate}>\n      {\n        isLoading ? <div>Loading...</div> :\n        collections.map((c, i) =>\n          <CollectionDetails key={c.slug} collectionId={c.slug} />\n        )\n      }\n      <Inspect item={collections.map(c => c.slug)} somethingelse />\n\n      <h1>User</h1>\n      <Inspect item={user} somethingelse />\n\n      <Input\n        name=\"email\"\n        type=\"email\"\n        value={user.email}\n        onChange={setUser}\n        />\n\n      <Input\n        name=\"password\"\n        type=\"password\"\n        value={user.password}\n        onChange={setUser}\n        />\n\n      <h1>New Collection</h1>\n      <Inspect item={collection} somethingelse />\n\n      <Input\n        placeholder=\"Collection Link (URL)\"\n        value={slug}\n        onChange={setSlug}\n        />\n\n      <Input\n        placeholder=\"Your API Key\"\n        value={apiKey}\n        onChange={setApiKey}\n        />\n\n\n      <h1>isAvailable</h1>\n      { isAvailable ? 'available' : 'name taken' }\n\n      <h1>isAvailable (previous)</h1>\n      { previousIsAvailable ? 'prev:available' : 'prev:name taken' }\n    </Page>\n  )\n}\n\n// export default inject('user')(observer(LoginForm))\n","import React from 'react'\nimport classNames from 'classnames'\n\nconst valueOnly = (fn) => ({ target }) => {\n  let { name, value } = target\n\n  if (name) {\n    return fn(target)\n  } else {\n    return fn(value)\n  }\n}\n\nexport default function Input({ name, value, onChange, label, placeholder, className, ...props }) {\n  return (\n    <section className=\"input-group\">\n      <input\n        className={classNames('input', className)}\n        type=\"text\"\n        name={name}\n        value={value}\n        placeholder={placeholder || name}\n        onChange={valueOnly(onChange)}\n        {...props}\n        />\n      <label>{ label || placeholder || name }</label>\n    </section>\n  )\n}\n"]}