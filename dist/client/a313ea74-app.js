!function(){if(!window.$fsx){var e=window.$fsx={};e.f={},e.m={},e.r=function(t){var l=e.m[t];if(l)return l.m.exports;var a,n=e.f[t];return n?((l=e.m[t]={}).exports={},l.m={exports:l.exports},n.call(l.exports,l.m,l.exports),null===(a=l.m.exports)||-1===["function","object","array"].indexOf(typeof a)||a.hasOwnProperty("default")||(Object.isFrozen(a)?a.default=a:Object.defineProperty(a,"default",{value:a,writable:!0,enumerable:!1})),l.m.exports):void 0}}}(),function(e){e.f[65]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(47),u=e.r(66);e.r(86),n.default.render(a.default.createElement(u.default,null),document.getElementById("app"))},e.f[66]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(0),u=e.r(67),r=e.r(81),o=e.r(84);l.default=(()=>a.default.createElement("div",{className:"page-content"},a.default.createElement(n.Router,null,a.default.createElement(o.default,{path:"signup",signup:!0}),a.default.createElement(o.default,{path:"login"}),a.default.createElement(r.default,{path:":collectionId/:itemId"}),a.default.createElement(u.default,{path:":collectionId"}),a.default.createElement(u.default,{path:"/"}),a.default.createElement("div",{default:!0},"Page not found"))))},e.f[67]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(68),u=e.r(79),r=e.r(71);l.default=function({collectionId:e="krwhitley"}){let{collection:t,isLoading:l}=r.useCollectionDetails(e);return!t||l?a.default.createElement("div",null,"Loading..."):a.default.createElement(u.default,{className:"collection"},a.default.createElement("h1",{className:"collection-title"},t.name),a.default.createElement(n.default,{items:t.items}))}},e.f[68]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(3),u=e.r(69);l.default=function({items:e}){console.log("Grid rendered",e.length);let t=void 0;return e.length<8&&(t="some"),e.length<4&&(t="few"),a.default.createElement("div",{className:n.default("grid",t)},e.map((e,t)=>a.default.createElement(u.default,{key:e.id,item:e})))}},e.f[69]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(0),u=e.r(70);l.default=function({item:e}){return a.default.createElement("article",null,a.default.createElement(n.Link,{to:`/${e.key}`},a.default.createElement(u.default,{id:e.key,width:400,height:400,alt:e.name}),a.default.createElement("label",null,a.default.createElement("span",null,e.name))))}},e.f[70]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(71);function u({id:e,alt:t,width:l,height:u,quality:r}){const o=[];l&&o.push(`width=${l}`),u&&o.push(`height=${u}`),r&&o.push(`quality=${r}`);const i=n.useImageWithPreview(`/i/${e}::${o.join(",")}.jpg`);return a.default.createElement("img",{src:i,alt:t})}l.default=u,l.default=u},e.f[71]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(62);a.__exportStar(e.r(72),l),a.__exportStar(e.r(76),l),a.__exportStar(e.r(77),l),a.__exportStar(e.r(78),l)},e.f[72]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(73);function u(e){let[t,l]=a.useState(!1);return a.useEffect(()=>{if(console.log("useCollectionSlugIsAvailable",e),e.length<5)return l(!1);n.fetchStatusIsOK(`/api/collections/${e}/available`).then(l)},[e]),t}l.useCollections=function(){let[e,t]=a.useState([]),[l,u]=a.useState(!1);return a.useEffect(()=>{console.log("useCollections:useEffect"),u(!0),n.fetchJSON("/api/collections").then(e=>{t(e),u(!1)})},[]),{collections:e,isLoading:l}},l.useCollectionSlugIsAvailable=u,l.useCollectionDetails=function(e){let[t,l]=a.useState(void 0),[u,r]=a.useState(!1);return a.useEffect(()=>{r(!0),n.fetchJSON(`/api/collections/${e}`).then(e=>{r(!1),l(e)})},[e]),{collection:t,isLoading:u}},l.useItemDetails=function({collectionId:e,itemId:t}){let[l,u]=a.useState(void 0),[r,o]=a.useState(!1);return a.useEffect(()=>{if(!e||!t)return console.warn("attempting to useItemDetails without collectionId or itemId");o(!0),n.fetchJSON(`/api/collections/${e}/items/${t}`).then(e=>{u(e),o(!1)})},[e,t]),{item:l,isLoading:r}},l.useNewCollection=function(){let[e,t]=a.useState(""),[l,r]=a.useState("");return{apiKey:l,setApiKey:r,slug:e,setSlug:n.withSlugifiedValue(t),isAvailable:u(e)}}},e.f[73]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(62);a.__exportStar(e.r(74),l),a.__exportStar(e.r(75),l)},e.f[74]=function(e,t){function l(...e){return fetch(...e).then(e=>e.status)}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJSON=function(...e){return fetch(...e).then(e=>e.json())},t.fetchStatus=l,t.fetchStatusIsOK=function(...e){return l(...e).then(e=>200===e)}},e.f[75]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.withValue=function(e){return({target:t})=>e({name:t.name,value:t.value})},t.withSlugifiedValue=function(e){return t=>e(t.toLowerCase().replace(/[^\w\.\-_]/gi,"-").replace(/\-+/gi,"-"))}},e.f[76]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52);l.useImageWithPreview=function(e){const t=e.replace(/^(.*)(\.jpg|png)$/i,"$1,preview$2");let[l,n]=a.useState(t);return a.useEffect(()=>{(new Image).onload=n(e)},[e]),l}},e.f[77]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52);l.usePrevious=function(e){const t=a.useRef();return a.useEffect(()=>{console.log("usePrevious:useEffect"),t.current=e},[e]),t.current}},e.f[78]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(73);l.save=function(e){return t=>n.fetchStatusIsOK(`/api/fake-collections/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},l.useUser=function(){let[e,t]=a.useState({email:"",password:"",isValidating:!1});return{user:e,setUser:({name:l,value:a})=>t(Object.assign({},e,{[l]:a}))}}},e.f[79]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(62),n=e.r(52),u=e.r(3),r=e.r(80);l.default=(e=>{var{children:t,className:l,back:o}=e,i=a.__rest(e,["children","className","back"]);return n.default.createElement("div",{className:u.default("page",l)},o&&n.default.createElement(r.default,Object.assign({},i)),t)})},e.f[80]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52);l.Back=(({navigate:e,to:t="../"})=>{return a.default.createElement("div",{className:"back",onClick:()=>e(t)})}),l.default=l.Back},e.f[81]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(70),u=e.r(82),r=e.r(79),o=e.r(71),i=e.r(83);l.default=function({collectionId:e,itemId:t,navigate:l}){let{item:c,isLoading:s}=o.useItemDetails({collectionId:e,itemId:t});return console.log("ItemViewer",e,t,c,s),!c||s?a.default.createElement("div",null,"Loading..."):a.default.createElement(r.default,{back:!0,className:"viewer",navigate:l},a.default.createElement(n.default,{id:e+"/"+c.id,width:900}),a.default.createElement(u.default,{item:c}),a.default.createElement(i.default,{item:c}))}},e.f[82]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(51);l.default=function({item:e}){return a.default.createElement("div",{className:"image-details"},a.default.createElement("h1",null,e.name),a.default.createElement("div",{className:"story"},n.default([e.story])))}},e.f[83]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52);l.default=(({item:e})=>a.default.createElement("pre",null,JSON.stringify(e,null,2)))},e.f[84]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(52),n=e.r(79),u=e.r(83),r=e.r(85),o=e.r(71);l.CollectionDetails=(({collectionId:e})=>{let{collection:t,isLoading:l}=o.useCollectionDetails(e);return t?a.default.createElement("div",null,a.default.createElement("h1",null,t.name," (",t.items.length,")")):a.default.createElement("div",null,"Loading...")}),l.default=(({navigate:e,signup:t=!1})=>{let{user:i,setUser:c}=o.useUser(),{collections:s,isLoading:f}=o.useCollections(),d=o.useNewCollection(),{slug:m,setSlug:p,apiKey:g,setApiKey:v,isAvailable:h}=d,E=o.usePrevious(h);return a.default.createElement(n.default,{className:"form full-page user-login",navigate:e},f?a.default.createElement("div",null,"Loading..."):s.map((e,t)=>a.default.createElement(l.CollectionDetails,{key:e.slug,collectionId:e.slug})),a.default.createElement(u.default,{item:s.map(e=>e.slug),somethingelse:!0}),a.default.createElement("h1",null,"User"),a.default.createElement(u.default,{item:i,somethingelse:!0}),a.default.createElement(r.default,{name:"email",type:"email",value:i.email,onChange:c}),a.default.createElement(r.default,{name:"password",type:"password",value:i.password,onChange:c}),a.default.createElement("h1",null,"New Collection"),a.default.createElement(u.default,{item:d,somethingelse:!0}),a.default.createElement(r.default,{placeholder:"Collection Link (URL)",value:m,onChange:p}),a.default.createElement(r.default,{placeholder:"Your API Key",value:g,onChange:v}),a.default.createElement("h1",null,"isAvailable"),h?"available":"name taken",a.default.createElement("h1",null,"isAvailable (previous)"),E?"prev:available":"prev:name taken")})},e.f[85]=function(t,l){Object.defineProperty(l,"__esModule",{value:!0});const a=e.r(62),n=e.r(52),u=e.r(3),r=e=>({target:t})=>{let{name:l,value:a}=t;return e(l?t:a)};l.default=function(e){var{name:t,value:l,onChange:o,label:i,placeholder:c,className:s}=e,f=a.__rest(e,["name","value","onChange","label","placeholder","className"]);return n.default.createElement("section",{className:"input-group"},n.default.createElement("input",Object.assign({className:u.default("input",s),type:"text",name:t,value:l,placeholder:c||t,onChange:r(o)},f)),n.default.createElement("label",null,i||c||t))}},e.r(65)}($fsx);
//# sourceMappingURL=app_quantum.js.map